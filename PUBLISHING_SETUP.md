# Publishing Setup Guide (å…¬é–‹è¨­å®šã‚¬ã‚¤ãƒ‰)

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€**åˆå›ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ™‚ã«æ‰‹å‹•ã§è¡Œã†å¿…è¦ã®ã‚ã‚‹è¨­å®šæ‰‹é †**ã§ã™ã€‚

> **ğŸ“ æ³¨æ„**: ä¸€åº¦è¨­å®šãŒå®Œäº†ã™ã‚Œã°ã€ãã®å¾Œã®ãƒªãƒªãƒ¼ã‚¹ã¯GitHub Actionsã§è‡ªå‹•åŒ–ã•ã‚Œã¾ã™ã€‚è‡ªå‹•ãƒªãƒªãƒ¼ã‚¹ã«ã¤ã„ã¦ã¯ [RELEASE_PROCESS.md](RELEASE_PROCESS.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ãŒå¿…è¦ãªå ´åˆ

- æ–°ã—ã„npmãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®åˆå›ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
- GitHub Actions ã«ã‚ˆã‚‹è‡ªå‹•å…¬é–‹ã®æº–å‚™
- npm registry ã¸ã®åˆå›ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç™»éŒ²

## å¿…è¦ãªäº‹å‰æº–å‚™

### 1. npm ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®æº–å‚™

**npm ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒå¿…è¦ã§ã™ï¼š**

1. **ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ**
   - [npm](https://www.npmjs.com/) ã§ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ
   - ã¾ãŸã¯æ—¢å­˜ã®npm ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½¿ç”¨

2. **ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åã®ç¢ºèª**
   - `npm search react-confirm` ã§ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åã®é‡è¤‡ã‚’ç¢ºèª
   - æ—¢å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨åå‰ãŒé‡è¤‡ã—ã¦ã„ãªã„ã“ã¨ã‚’ç¢ºèª

### 2. npm Access Token ã®å–å¾—

**è‡ªå‹•å…¬é–‹ç”¨ã®ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å–å¾—ã—ã¾ã™ï¼š**

1. **npm ã«ãƒ­ã‚°ã‚¤ãƒ³**
   - [npm](https://www.npmjs.com/) ã«ãƒ­ã‚°ã‚¤ãƒ³

2. **Access Token ã‚’ä½œæˆ**
   - ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ« â†’ Access Tokens â†’ Generate New Token
   - Token Type: **Automation** ã‚’é¸æŠï¼ˆCI/CDç”¨ï¼‰
   - Tokenåã‚’å…¥åŠ›ï¼ˆä¾‹: "GitHub Actions"ï¼‰
   - "Generate Token" ã‚’ã‚¯ãƒªãƒƒã‚¯

3. **ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ã‚³ãƒ”ãƒ¼**
   - ç”Ÿæˆã•ã‚ŒãŸãƒˆãƒ¼ã‚¯ãƒ³ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦å®‰å…¨ãªå ´æ‰€ã«ä¿å­˜
   - âš ï¸ **é‡è¦**: ã“ã®ãƒˆãƒ¼ã‚¯ãƒ³ã¯ä¸€åº¦ã—ã‹è¡¨ç¤ºã•ã‚Œã¾ã›ã‚“

## GitHub Repository ã®ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆè¨­å®š

**GitHub Repository ã«èªè¨¼æƒ…å ±ã‚’è¨­å®šã—ã¾ã™ï¼š**

1. **GitHub Repository ã®è¨­å®šãƒšãƒ¼ã‚¸ã«ã‚¢ã‚¯ã‚»ã‚¹**
   - GitHubã®è©²å½“ãƒªãƒã‚¸ãƒˆãƒªãƒšãƒ¼ã‚¸ã«ç§»å‹•
   - "Settings" ã‚¿ãƒ–ã‚’ã‚¯ãƒªãƒƒã‚¯

2. **Secrets and variables ã®è¨­å®š**
   - å·¦ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ "Secrets and variables" â†’ "Actions" ã‚’ã‚¯ãƒªãƒƒã‚¯

3. **Repository secret ã®è¿½åŠ **
   
   **å¿…é ˆã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆ1: npm Token**
   - "New repository secret" ã‚’ã‚¯ãƒªãƒƒã‚¯
   - **Name**: `NPM_TOKEN`
   - **Value**: ä¸Šè¨˜ã§å–å¾—ã—ãŸnpm Access Token
   - "Add secret" ã‚’ã‚¯ãƒªãƒƒã‚¯
   
   **å¿…é ˆã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆ2: GitHub Personal Access Token**
   - "New repository secret" ã‚’ã‚¯ãƒªãƒƒã‚¯
   - **Name**: `PAT_TOKEN`
   - **Value**: GitHubã®Personal Access Token (repoæ¨©é™å¿…è¦)
   - "Add secret" ã‚’ã‚¯ãƒªãƒƒã‚¯
   
   > **ğŸ“ PAT_TOKENãŒå¿…è¦ãªç†ç”±:**
   > GitHub Actionsãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãŒä½œæˆã™ã‚‹Pull Requestã«å¯¾ã—ã¦CIï¼ˆãƒ†ã‚¹ãƒˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ï¼‰ã‚’è‡ªå‹•å®Ÿè¡Œã™ã‚‹ãŸã‚ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®`GITHUB_TOKEN`ã§ã¯æ¨©é™ãŒä¸è¶³ã—ã¾ã™ã€‚`PAT_TOKEN`ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãŒä½œæˆã—ãŸPRã§ã‚‚ä»–ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãŒæ­£å¸¸ã«å‹•ä½œã—ã¾ã™ã€‚
   
   > **ğŸ“ GitHub Personal Access Tokenã®å–å¾—æ–¹æ³•:**
   > 1. GitHub Settings â†’ Developer settings â†’ Personal access tokens â†’ Tokens (classic)
   > 2. "Generate new token" â†’ "Generate new token (classic)"
   > 3. ã‚¹ã‚³ãƒ¼ãƒ—ã§ "repo" ã‚’é¸æŠ
   > 4. ç”Ÿæˆã•ã‚ŒãŸãƒˆãƒ¼ã‚¯ãƒ³ã‚’ã‚³ãƒ”ãƒ¼

## åˆå›ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å…¬é–‹ï¼ˆæ‰‹å‹•ï¼‰

**âš ï¸ é‡è¦**: npm ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®åˆå›å…¬é–‹ã¯æ‰‹å‹•ã§è¡Œã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```bash
# ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm ci

# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
npm test

# ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰
npm run build

# åˆå›å…¬é–‹
npm publish --access public
```

> **ğŸ“ æ³¨æ„**: 
> - `--access public` ã¯å¿…é ˆã§ã™ï¼ˆã‚¹ã‚³ãƒ¼ãƒ—ä»˜ããƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ãƒ‘ãƒ–ãƒªãƒƒã‚¯ã«ã™ã‚‹ãŸã‚ï¼‰
> - åˆå›å…¬é–‹å¾Œã¯ã€GitHub ActionsãŒè‡ªå‹•çš„ã«å¾Œç¶šã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å…¬é–‹ã—ã¾ã™

## ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å¯è¦–æ€§è¨­å®š

åˆå›å…¬é–‹å¾Œã€npmä¸Šã§ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸è¨­å®šã‚’ç¢ºèªï¼š

1. **[npm](https://www.npmjs.com/) ã«ãƒ­ã‚°ã‚¤ãƒ³**
2. **Your Packages ã§ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’é¸æŠ**
3. **Settings ã‚¿ãƒ–ã§è¨­å®šç¢ºèª**
   - Visibility: Public
   - Publish access: Maintainers onlyï¼ˆæ¨å¥¨ï¼‰

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—å®Œäº†å¾Œ

**å…¨ã¦ã®è¨­å®šãŒå®Œäº†ã™ã‚‹ã¨ï¼š**

- âœ… GitHub Actions ã«ã‚ˆã‚‹è‡ªå‹•ãƒªãƒªãƒ¼ã‚¹ãŒåˆ©ç”¨å¯èƒ½
- âœ… npm registry ã¸ã®è‡ªå‹•å…¬é–‹ãŒæœ‰åŠ¹
- âœ… [RELEASE_PROCESS.md](RELEASE_PROCESS.md) ã®æ‰‹é †ã§ãƒªãƒªãƒ¼ã‚¹å®Ÿè¡Œå¯èƒ½

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### æ‰‹å‹•ã§ã®å‹•ä½œç¢ºèª

**ç·Šæ€¥æ™‚ã‚„ãƒ†ã‚¹ãƒˆç›®çš„ã§ãƒ­ãƒ¼ã‚«ãƒ«ã‹ã‚‰æ‰‹å‹•å…¬é–‹ã™ã‚‹å ´åˆï¼š**

```bash
# npm ã«ãƒ­ã‚°ã‚¤ãƒ³
npm login

# ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ãƒ†ã‚¹ãƒˆå…¬é–‹ï¼ˆå®Ÿéš›ã«ã¯å…¬é–‹ã•ã‚Œãªã„ï¼‰
npm publish --dry-run

# å®Ÿéš›ã®å…¬é–‹
npm publish --access public
```

> **âš ï¸ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ³¨æ„**: npm Access Token ã¯ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§ã®ã¿ä½¿ç”¨ã—ã€ãƒªãƒã‚¸ãƒˆãƒªã«ã‚³ãƒŸãƒƒãƒˆã—ãªã„ã§ãã ã•ã„ã€‚

### ã‚ˆãã‚ã‚‹ã‚¨ãƒ©ãƒ¼

**å…¬é–‹æ¨©é™ã‚¨ãƒ©ãƒ¼:**
```
npm ERR! 403 Forbidden - PUT https://registry.npmjs.org/react-confirm - you must verify your email to publish packages
```
â†’ npm ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ãƒ¡ãƒ¼ãƒ«èªè¨¼ãŒå¿…è¦ã§ã™

**ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åé‡è¤‡ã‚¨ãƒ©ãƒ¼:**
```
npm ERR! 403 Forbidden - PUT https://registry.npmjs.org/react-confirm - package name too similar to existing packages
```
â†’ package.json ã® name ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’å¤‰æ›´ã—ã¦ãã ã•ã„

**èªè¨¼ã‚¨ãƒ©ãƒ¼:**
```
npm ERR! 401 Unauthorized - PUT https://registry.npmjs.org/react-confirm
```
â†’ NPM_TOKEN ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªã—ã¦ãã ã•ã„

## é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- **è‡ªå‹•ãƒªãƒªãƒ¼ã‚¹**: [RELEASE_PROCESS.md](RELEASE_PROCESS.md) - ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—å®Œäº†å¾Œã®è‡ªå‹•ãƒªãƒªãƒ¼ã‚¹ãƒ—ãƒ­ã‚»ã‚¹
- **npmå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: [Publishing packages](https://docs.npmjs.com/packages-and-modules/contributing-packages-to-the-registry)
- **GitHub Actionsè¨­å®š**: `.github/workflows/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã®å„ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«
